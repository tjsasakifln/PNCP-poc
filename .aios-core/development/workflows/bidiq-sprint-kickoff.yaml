workflow:
  id: bidiq-sprint-kickoff
  name: BidIQ Sprint Kickoff
  description: >-
    Agent workflow for sprint planning ceremony. Reviews the backlog, prioritizes
    stories by business value, plans capacity, and breaks down work into actionable
    tasks for the BidIQ development team.
  type: brownfield
  project_types:
    - sprint-planning
    - ceremony
    - project-management

  sequence:
    - step: review_backlog
      phase: 1
      phase_name: Backlog Review
      agent: pm
      action: review current backlog including open issues, pending stories, and tech debt
      creates: backlog status report
      notes: >-
        Revisar: issues abertas no GitHub, stories em docs/stories/,
        tech debt identificada, bugs pendentes. Verificar ROADMAP.md e
        ISSUES-ROADMAP.md para contexto. Listar itens candidatos para o sprint.

    - step: prioritize_stories
      phase: 2
      phase_name: Story Prioritization
      agent: po
      action: prioritize stories by business value and dependencies
      creates: prioritized backlog
      notes: >-
        Priorizar por: valor de negócio (funcionalidades core do BidIQ primeiro),
        dependências técnicas (backend antes de frontend), riscos (integração PNCP),
        e quick wins. Considerar: PNCP client, filtros, Excel, LLM, frontend.

    - step: sprint_planning
      phase: 3
      phase_name: Sprint Planning
      agent: sm
      action: facilitate sprint planning with capacity and velocity analysis
      creates: sprint goal, sprint scope
      notes: >-
        Definir: sprint goal claro e mensurável, capacidade da equipe,
        velocity baseada em sprints anteriores (se disponível),
        duração do sprint (sugestão: 1-2 semanas para POC).
        Selecionar stories que cabem na capacidade.

    - step: technical_feasibility
      phase: 4
      phase_name: Technical Feasibility
      agent: architect
      action: review technical feasibility of selected stories
      creates: technical feasibility notes
      notes: >-
        Avaliar viabilidade técnica das stories selecionadas: complexidade
        de integração PNCP, impacto na arquitetura existente, dependências
        externas (OpenAI API, PNCP API availability), riscos técnicos.
        Sinalizar stories que precisam de spike ou investigação.

    - step: create_sprint_board
      phase: 5
      phase_name: Sprint Board Setup
      agent: sm
      action: create sprint board with assignments and dependencies
      creates: sprint board, story assignments
      notes: >-
        Organizar sprint board: atribuir stories, definir dependências
        entre tasks, identificar caminho crítico. Criar issues no GitHub
        se necessário (gh issue create). Documentar sprint plan.

    - step: task_breakdown
      phase: 6
      phase_name: Task Breakdown
      agent: dev
      action: break down stories into implementation tasks and identify blockers
      creates: task list per story, blocker list
      notes: >-
        Decompor cada story em tasks técnicas: implementação, testes,
        documentação. Estimar esforço por task. Identificar blockers:
        dependências de API, configuração de ambiente, dados de teste.
        Atualizar stories em docs/stories/ com tasks detalhadas.

  decision_guidance:
    when_to_use:
      - Starting a new development sprint
      - Replanning after scope change or priority shift
      - Onboarding new team members to current work
      - Weekly or bi-weekly sprint cadence ceremony
      - After completing a milestone and planning next iteration

  handoff_prompts:
    pm_to_po: "Backlog reviewed with all candidates listed. Prioritize by business value for sprint selection."
    po_to_sm: "Stories prioritized. Plan the sprint with capacity and velocity considerations."
    sm_to_architect: "Sprint scope defined. Review technical feasibility of selected stories."
    architect_to_sm: "Feasibility reviewed. Finalize sprint board with assignments."
    sm_to_dev: "Sprint board ready. Break down stories into implementation tasks."
    complete: "Sprint kickoff complete. Development can begin with clear goals and task assignments."
