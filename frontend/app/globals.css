@tailwind base;
@tailwind components;
@tailwind utilities;

/* BidIQ Design System — Navy/Blue institutional palette */
:root {
  /* Canvas & Ink - WCAG Contrast Documentation */
  --canvas: #ffffff;  /* Base background */
  --ink: #1e2d3b;     /* Primary text - vs canvas: 12.6:1 (AAA ✅) */
  --ink-secondary: #3d5975;  /* Secondary text - vs canvas: 5.5:1 (AA ✅) */
  --ink-muted: #6b7a8a;  /* Muted text - vs canvas: 5.1:1 (AA ✅) - Bug fix P2-6: Improved from #808f9f (4.48:1) */
  --ink-faint: #c0d2e5;  /* Faint text/borders - vs canvas: 1.9:1 (decorative only) */

  /* Brand Colors */
  --brand-navy: #0a1e3f;  /* Primary brand - vs canvas: 14.8:1 (AAA ✅) */
  --brand-blue: #116dff;  /* Accent color - vs canvas: 4.8:1 (AA ✅) */
  --brand-blue-hover: #0d5ad4;  /* Hover state - vs canvas: 6.2:1 (AA+ ✅) */
  --brand-blue-subtle: #e8f0ff;  /* Subtle background - vs ink: 1.1:1 (decorative only) */

  /* Surface Hierarchy */
  --surface-0: #ffffff;  /* Base surface */
  --surface-1: #f7f8fa;  /* Elevated surface - vs ink: 12.3:1 (AAA ✅) */
  --surface-2: #f0f2f5;  /* Card backgrounds - vs ink: 11.8:1 (AAA ✅) */
  --surface-elevated: #ffffff;  /* Modals/dropdowns */

  /* Semantic Colors */
  --success: #16a34a;  /* Success state - vs canvas: 4.7:1 (AA ✅) */
  --success-subtle: #f0fdf4;  /* Success bg - vs success: 1.2:1 (decorative) */
  --error: #dc2626;  /* Error state - vs canvas: 5.9:1 (AA ✅) */
  --error-subtle: #fef2f2;  /* Error bg - vs error: 1.1:1 (decorative) */
  --warning: #ca8a04;  /* Warning state - vs canvas: 5.2:1 (AA ✅) */
  --warning-subtle: #fefce8;  /* Warning bg - vs warning: 1.1:1 (decorative) */

  /* Borders */
  --border: rgba(0, 0, 0, 0.08);  /* Subtle borders */
  --border-strong: rgba(0, 0, 0, 0.15);  /* Emphasized borders */
  --border-accent: rgba(17, 109, 255, 0.3);  /* Brand borders */

  /* Focus Ring */
  --ring: #116dff;  /* Focus indicator - vs canvas: 4.8:1 (AA ✅) */

  /* ========================================
     STORY-174: Premium SaaS Design System
     Landing Page Visual Redesign
     ======================================== */

  /* Fluid Typography Scale */
  --text-hero: clamp(2.5rem, 5vw + 1rem, 4.5rem);     /* 40-72px */
  --text-h1: clamp(2rem, 4vw + 1rem, 3.5rem);         /* 32-56px */
  --text-h2: clamp(1.5rem, 3vw + 0.5rem, 2.5rem);     /* 24-40px */
  --text-h3: clamp(1.25rem, 2vw + 0.5rem, 1.75rem);   /* 20-28px */
  --text-body-lg: clamp(1.125rem, 1vw + 0.5rem, 1.25rem); /* 18-20px */

  /* Premium Gradients */
  --gradient-brand: linear-gradient(135deg, #116dff 0%, #0a1e3f 100%);
  --gradient-brand-hover: linear-gradient(135deg, #0d5ad4 0%, #081732 100%);
  --gradient-hero-bg: linear-gradient(180deg, #ffffff 0%, #f0f4ff 100%);
  --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
  --gradient-text: linear-gradient(135deg, #116dff 0%, #0a1e3f 100%);

  /* Glassmorphism */
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.18);
  --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);

  /* Premium Shadows (Layered for depth) */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --shadow-glow: 0 0 20px rgba(17, 109, 255, 0.5);
  --shadow-glow-lg: 0 0 40px rgba(17, 109, 255, 0.4);

  /* Section Spacing (8pt grid) */
  --section-padding-sm: 4rem;   /* 64px - Mobile */
  --section-padding-lg: 6rem;   /* 96px - Desktop */
  --section-gap: 8rem;          /* 128px - Between sections */
}

/* Dark mode overrides - WCAG Contrast Documentation */
.dark {
  --canvas: #121212;  /* Dark background */
  --ink: #e8eaed;  /* Primary text - vs canvas: 11.8:1 (AAA ✅) */
  --ink-secondary: #a8b4c0;  /* Secondary text - vs canvas: 7.2:1 (AAA ✅) */
  --ink-muted: #6b7a8a;  /* Muted text - vs canvas: 4.9:1 (AA ✅) */
  --ink-faint: #3a4555;  /* Faint text - vs canvas: 2.1:1 (decorative only) */

  --brand-blue-subtle: rgba(17, 109, 255, 0.12);  /* Subtle bg - decorative */

  --surface-0: #121212;  /* Base surface */
  --surface-1: #1a1d22;  /* Elevated - vs ink: 11.2:1 (AAA ✅) */
  --surface-2: #242830;  /* Cards - vs ink: 10.5:1 (AAA ✅) */
  --surface-elevated: #1e2128;  /* Modals - vs ink: 10.8:1 (AAA ✅) */

  --success: #22c55e;  /* Success - vs canvas: 6.8:1 (AA+ ✅) */
  --success-subtle: #052e16;  /* Success bg - vs success: 1.3:1 (decorative) */
  --error: #f87171;  /* Error - vs canvas: 5.1:1 (AA ✅) */
  --error-subtle: #450a0a;  /* Error bg - vs error: 1.2:1 (decorative) */
  --warning: #facc15;  /* Warning - vs canvas: 12.1:1 (AAA ✅) */
  --warning-subtle: #422006;  /* Warning bg - vs warning: 1.1:1 (decorative) */

  --border: rgba(255, 255, 255, 0.08);  /* Subtle borders */
  --border-strong: rgba(255, 255, 255, 0.15);  /* Emphasized borders */
  --border-accent: rgba(17, 109, 255, 0.4);  /* Brand borders */

  --ring: #3b8bff;  /* Focus indicator - vs canvas: 6.2:1 (AA ✅) */

  /* STORY-174: Dark mode premium variables */
  --gradient-hero-bg: linear-gradient(180deg, #121212 0%, #1a1d22 100%);
  --glass-bg: rgba(26, 29, 34, 0.7);
  --glass-border: rgba(255, 255, 255, 0.12);
  --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}

body {
  color: var(--ink);
  background: var(--canvas);
  font-family: var(--font-body), sans-serif;
  font-size: clamp(14px, 1vw + 10px, 16px);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Subtle background texture — document/official aesthetic */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  background-image:
    radial-gradient(circle at 20% 50%, var(--brand-blue-subtle) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, var(--brand-blue-subtle) 0%, transparent 40%);
  opacity: 0.4;
}

/* Improved focus states for accessibility - WCAG 2.2 AAA compliant */
:focus-visible {
  outline: 3px solid var(--ring);  /* 3px meets WCAG 2.2 Level AAA (2.4.13 Focus Appearance) */
  outline-offset: 2px;
}

/* Button base styles for better touch targets */
button {
  min-height: 44px;
  cursor: pointer;
}

/* Form input improvements */
input[type="date"],
select {
  min-height: 44px;
}

/* Indeterminate progress bar animation */
@keyframes slide {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(300%); }
}

/* Staggered entrance animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.4s ease-out both;
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out both;
  }

  /* Stagger delays for lists */
  .stagger-1 { animation-delay: 50ms; }
  .stagger-2 { animation-delay: 100ms; }
  .stagger-3 { animation-delay: 150ms; }
  .stagger-4 { animation-delay: 200ms; }
  .stagger-5 { animation-delay: 250ms; }

  /* STORY-174: Premium hover effects */
  .hover-lift {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hover-lift:hover {
    transform: translateY(-8px);
  }

  .hover-glow {
    transition: box-shadow 0.3s ease-out;
  }

  .hover-glow:hover {
    box-shadow: var(--shadow-glow);
  }

  .hover-scale {
    transition: transform 0.2s ease-out;
  }

  .hover-scale:hover {
    transform: scale(1.02);
  }

  /* Gradient text utility */
  .text-gradient {
    background: var(--gradient-text);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

/* ========================================
   STORY-174: Premium Animations
   ======================================== */

@keyframes gradient {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ==================================
   Shepherd.js Custom Styling - BidIQ Theme
   Feature #3 - Interactive Onboarding
   ================================== */

.shepherd-modal-overlay-container {
  z-index: 9998;
}

.shepherd-element {
  z-index: 9999;
  max-width: 500px;
}

.shepherd-theme-custom {
  @apply bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700;
}

.shepherd-theme-custom .shepherd-header {
  @apply bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 rounded-t-lg;
}

.shepherd-theme-custom .shepherd-title {
  @apply text-xl font-bold font-sans;
}

.shepherd-theme-custom .shepherd-text {
  @apply px-6 py-4 text-gray-700 dark:text-gray-200 text-base leading-relaxed;
}

.shepherd-theme-custom .shepherd-text p {
  @apply mb-3 last:mb-0;
}

.shepherd-theme-custom .shepherd-text ul {
  @apply space-y-2 text-sm;
}

.shepherd-theme-custom .shepherd-text ul li {
  @apply text-gray-600 dark:text-gray-300;
}

.shepherd-theme-custom .shepherd-footer {
  @apply px-6 py-4 bg-gray-50 dark:bg-gray-900 rounded-b-lg border-t border-gray-200 dark:border-gray-700 flex justify-between items-center gap-3;
}

.shepherd-theme-custom .shepherd-button {
  @apply px-5 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.shepherd-theme-custom .shepherd-button-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
}

.shepherd-theme-custom .shepherd-button-secondary {
  @apply bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-gray-500;
}

.shepherd-theme-custom .shepherd-cancel-icon {
  @apply text-white hover:text-gray-200 transition-colors;
}

/* Arrow styling */
.shepherd-theme-custom .shepherd-arrow {
  @apply hidden;
}

/* Animation for shepherd elements */
.shepherd-element {
  animation: shepherdFadeIn 0.3s ease-out;
}

@keyframes shepherdFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dark mode modal overlay */
.shepherd-modal-overlay-container.shepherd-modal-is-visible {
  @apply bg-black/60;
}

/* Highlight target element */
.shepherd-target {
  @apply ring-4 ring-blue-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 transition-all duration-300;
}

/* Progress indicator in footer */
.shepherd-progress {
  @apply flex items-center gap-1.5;
}

.shepherd-progress-dot {
  @apply w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600 transition-all duration-200;
}

.shepherd-progress-dot.active {
  @apply bg-blue-600 w-3 h-3;
}

.shepherd-progress-dot.completed {
  @apply bg-blue-400;
}

/* ==================================
   Pull-to-Refresh Mobile-Only Styles
   Issue #119 - Mobile UX Enhancement
   ================================== */

/* Desktop: Disable pull-to-refresh */
@media (min-width: 768px) {
  .pull-to-refresh-wrapper {
    pointer-events: none;
  }

  .pull-to-refresh-wrapper > div {
    pointer-events: auto;
  }
}

/* Mobile: Enable pull-to-refresh with native-like feel */
@media (max-width: 767px) {
  .pull-to-refresh-wrapper {
    min-height: calc(100vh - 200px);
    touch-action: pan-y;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* ==================================
   React Day Picker Custom Styling
   Issue #118 - Mobile-Optimized Date Picker
   ================================== */

.mobile-date-picker .rdp {
  --rdp-cell-size: 44px;
  --rdp-accent-color: var(--brand-navy);
  --rdp-background-color: var(--brand-blue-subtle);
  --rdp-accent-color-dark: var(--brand-blue-hover);
  --rdp-background-color-dark: var(--surface-2);
  --rdp-outline: 3px solid var(--ring);
  --rdp-outline-selected: 2px solid var(--brand-blue);
  margin: 0;
}

/* Month navigation */
.mobile-date-picker .rdp-caption {
  @apply flex justify-between items-center mb-4;
}

.mobile-date-picker .rdp-caption_label {
  @apply text-base font-semibold text-ink;
}

.mobile-date-picker .rdp-nav_button {
  @apply w-10 h-10 flex items-center justify-center rounded-button
         text-ink-secondary hover:bg-surface-1 transition-colors;
}

/* Weekday headers */
.mobile-date-picker .rdp-head_cell {
  @apply text-xs font-medium text-ink-muted uppercase;
  width: 44px;
  height: 32px;
}

/* Day cells */
.mobile-date-picker .rdp-cell {
  @apply text-sm;
  width: 44px;
  height: 44px;
}

.mobile-date-picker .rdp-day {
  @apply w-full h-full flex items-center justify-center rounded-button
         text-ink hover:bg-surface-1 transition-colors;
  border: 2px solid transparent;
}

/* Selected day */
.mobile-date-picker .rdp-day_selected {
  @apply bg-brand-navy text-white font-semibold;
  border-color: var(--brand-navy);
}

.mobile-date-picker .rdp-day_selected:hover {
  @apply bg-brand-blue-hover;
}

/* Today */
.mobile-date-picker .rdp-day_today {
  @apply font-semibold;
  border-color: var(--brand-blue);
}

/* Disabled days */
.mobile-date-picker .rdp-day_disabled {
  @apply text-ink-faint cursor-not-allowed opacity-50;
}

.mobile-date-picker .rdp-day_disabled:hover {
  @apply bg-transparent;
}

/* Outside month days */
.mobile-date-picker .rdp-day_outside {
  @apply text-ink-faint;
}

/* Focus states for accessibility */
.mobile-date-picker .rdp-day:focus-visible {
  outline: 3px solid var(--ring);
  outline-offset: 2px;
}

/* Dark mode overrides */
.dark .mobile-date-picker .rdp-day {
  @apply text-ink;
}

.dark .mobile-date-picker .rdp-day_selected {
  @apply bg-brand-navy text-white;
}

/* ============================================================
   NProgress Custom Styles (Page Transition Loading Bar)
   ============================================================ */

/* Loading bar */
#nprogress .bar {
  @apply bg-brand-blue;
  height: 3px;
  z-index: 9999;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
}

/* Glow effect */
#nprogress .peg {
  box-shadow: 0 0 10px var(--brand-blue), 0 0 5px var(--brand-blue);
}

/* Dark mode adjustments */
.dark #nprogress .bar {
  @apply bg-brand-blue;
}

.dark #nprogress .peg {
  box-shadow: 0 0 12px var(--brand-blue), 0 0 6px var(--brand-blue);
}
